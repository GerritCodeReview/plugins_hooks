{
  "comments": [
    {
      "key": {
        "uuid": "c168dbaf_a5295df3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 11,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-07-12T01:36:04Z",
      "side": 1,
      "message": "This is the same for most of the other hooks.  I wonder if we should instead update the HookArgs.format(AccountInfo) to emit the username if it\u0027s set?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 11,
        "endChar": 36
      },
      "revId": "51fa82a143e13946dcd3c92bf9dddffe264853bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "32d5a69b_f08fd633",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/hooks/GitReferenceUpdated.java",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-06-29T02:06:07Z",
      "side": 1,
      "message": "What happens if the user does not have a username?",
      "revId": "51fa82a143e13946dcd3c92bf9dddffe264853bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "768261f3_9c4720df",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/hooks/GitReferenceUpdated.java",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1043947
      },
      "writtenOn": "2017-07-11T19:11:38Z",
      "side": 1,
      "message": "Sorry for the late reply!\n\n`username` is a instance variable for class `AccountInfo`, so I assume it would be the default if the user somehow hasn\u0027t get the `username` set.",
      "parentUuid": "32d5a69b_f08fd633",
      "revId": "51fa82a143e13946dcd3c92bf9dddffe264853bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b9b8a0ce_383cb4f0",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/hooks/GitReferenceUpdated.java",
        "patchSetId": 2
      },
      "lineNbr": 41,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2017-07-12T01:36:04Z",
      "side": 1,
      "message": "There is no default username; if the user has not set one, it is empty/null.  This should be OK though, because the method being used here handles it:\n\n  public void add(String name, String value) {\n    args.add(name);\n    args.add(Strings.nullToEmpty(value));\n  }\n\nHowever, the AccountInfo returned by getUpdater() can also be null, as mentioned in the javadoc of GitReferenceUpdatedListener:\n\n    /** The updater, could be null if it\u0027s the server. */\n    @Nullable\n    AccountInfo getUpdater();\n\nso we should at least have a null check here otherwise calling:\n\n  getUpdater().username\n\ncan potentially cause NPE.",
      "parentUuid": "768261f3_9c4720df",
      "revId": "51fa82a143e13946dcd3c92bf9dddffe264853bb",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}